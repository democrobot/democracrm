{% extends "core/test_base.html" %}

{% block stylesheet %}
<link href="styles.css" rel="stylesheet" >
{% endblock %}

{% block content %}
<h2>United States of America</h2>

<div id='map' style='width: 100%; height: 500px;'></div>
<script>
var map = new maplibregl.Map({
  container: 'map',
  style: 'https://api.maptiler.com/maps/openstreetmap/style.json?key=yoy5FRzBDMPSjmTqLsgm', // stylesheet location
  center: [-74.5, 40], // starting position [lng, lat]
  zoom: 3 // starting zoom
});
map.on('load', () => {
    map.addSource('us_states', {
        type: 'geojson',
        data: '/us/us.geojson',
    });
    map.addLayer({
            'id': 'us_states',
            'type': 'fill',
            'source': 'us_states',
            'layout': {},
            'paint': {
                'fill-color': '#088',
                'fill-opacity': 0.8
            }
        });
});
//map.setCenter({{ centroid }});
//map.setZoom(9);
</script>

<h3>State Pages ({{ states.count }} States)</h3>
<ul>
{% for state in states %}
<li><a href="{{ state.stusps|lower }}">{{ state.name }}</a></li>
{% endfor %}
</ul>

{% endblock %}